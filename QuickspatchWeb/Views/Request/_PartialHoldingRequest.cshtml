@using QuickspatchWeb.HtmlHelpers
@using QuickspatchWeb.Models.HoldingRequest
@model string
<div @*class="panel panel-table"*@ ng-controller="holdingRequestController" ng-init="shareInit()" id="holding-request-controller">
    @*<div class="panel-heading">
            <div class="panel-title-small">Holding requests</div>
        </div>*@
    <div class="panel-control border-bottom">
        @*@Html.Partial("_CreateHoldingRequest", new DashboardHoldingRequestShareViewModel())*@
        <div class="row">
            <div class="col-sm-4 col-xs-12">
                <div>
                    <button class="btn btn-primary" type="button" ng-click="ShowHoldingForm(true)"><i class="fa fa-plus"></i> New </button>
                    &nbsp;
                    <button ng-disabled ="IsShowDeleteAll" class="btn btn-sm btn-default" title="Delete holding requests" ng-click="DeleteSelected()"><i class=" fa fa-trash"></i></button>

                </div>
            </div>
            <div class="col-sm-4 col-xs-12">
                <div class="pull-right daterange-filter" id="reportrangeholding" title="Filter by Created Date">
                    <i class="fa fa-calendar"></i>
                    <span></span>
                </div>
            </div>
            <div class="col-sm-4 col-xs-12">
                <div class="k-widget search-box">
                    <span class="k-picker-wrap k-state-default">
                        <input type="text" class="k-input" placeholder="Search ..." ng-model="SearchText" ng-keyup="Search($event)">
                        <span class="k-select" ng-click="Search()">
                            <i class="fa fa-search"></i>
                        </span>
                    </span>
                </div>
            </div>
        </div>
    </div>

    <div class="panel-content screen-fit-1">
        <div kendo-grid k-options="mainGridOptions" id="holdingGrid" class="responsive-grid hidden-pager"></div>
        <script type="text/x-kendo-template" id="holdingRequestButtons">
            <div class="btn-group">
                <button class="btn btn-sm btn-default" ng-click="Edit(dataItem);" title="Edit"><i class="fa fa-edit"></i></button>
                <button class="btn btn-sm btn-default" ng-click="Delete(${ Id });" id="btn-delete-holding-request-#= Id#" title="Delete"><i class="fa fa-trash"></i></button>
                #if(OutOfDate==false && IsShowSend == true)
                {#
                <button class="btn btn-sm btn-default btn-holding-request" name="sendHoldingRequest" ng-click="callSendHoldingRequestCard(dataItem)" title="Send holding to request"><i class="fa fa-send"></i></button>
                #}#
            </div>

        </script>

        <script type="text/x-kendo-template" id="holdingRequestcheckBox">
            <input type='checkbox' name='holding-request-check' id="chk-#= Id#" ng-model="dataItem.CheckedBox" class="k-checkbox" ng-click="choose(dataItem)" />
            <label class="k-checkbox-label" for="chk-#= Id#"></label>

        </script>

        <div id="send-holding-request" ng-show="IsShowHoldingToRequestForm" class="card border-info" style="position: absolute; z-index:100; width: 300px; padding: 10px;">

            <form class="smart-form">
                <fieldset class="panel-control border-bottom no-padding">
                    <section class="col col-12">
                        <div class="col col-6 no-padding">
                            <label><span class='red'>*</span> @Model</label>
                        </div>
                        <div class="col col-6 no-padding" style="margin-top: -7px;">
                            <label class="checkbox pull-right"><input type="checkbox" ng-model="HoldingToRequest.AutoAssign" /><i></i> Auto assign</label>
                        </div>
                        @Html.Lookup("HoldingToRequestCourierId", "", "CourierHoldingToRequest", "HoldingToRequest.CourierId", 12, urlToReadData: "Courier/GetLookup", isRequired: true, showAddEdit: false, moreClass: "no-margin no-padding")
                    </section>
                    <section class="col col-12 no-margin">
                        <div class="col col-6 no-padding">
                            <label><span class='red'>*</span> Dispatch Time</label>
                        </div>
                        <div class="col col-6 no-padding" style="margin-top: -7px;">
                            <label class="checkbox pull-right red"><input type="checkbox" ng-model="HoldingToRequest.IsStat" /><i></i> STAT</label>
                        </div>
                        @Html.CustomTimePicker("HoldingToRequestSendingTime", "", "HoldingToRequest.SendingTime", 12, "hh:mm tt", hasMin: true, moreClass: "no-padding")

                    </section>

                    <section class="col col-12 no-margin">
                        <div class="btn-group pull-right">

                            <button class="btn btn-default" type="button" ng-click="callSendHoldingRequestCard(0,false)"><i class="fa fa-remove"></i> Cancel</button>
                            <button class="btn btn-primary" ng-show="!IsShowLoading" type="button" ng-click="sendHoldingRequest()"><i class="fa fa-plus"></i> Send</button>
                            <button class="btn btn-primary" ng-show="IsShowLoading"><img src="@(Url.Content("~/Content/quickspatch/img/loading.gif"))" alt="" height="14" /></button>
                        </div>
                    </section>

                </fieldset>
            </form>
        </div>
    </div>

    @*<div class="panel-control border-top" style=" padding: 4px 10px !important;">
        <div class="row">
            <div class="col-xs-8">

                <div class="k-widget search-box">
                    <span class="k-picker-wrap k-state-default">
                        <input type="text" class="k-input" placeholder="Find holding request" ng-model="SearchText" ng-keyup="Search($event)">
                        <span class="k-select" ng-click="Search()">
                            <i class="fa fa-search"></i>
                        </span>
                    </span>
                </div>
            </div>
            <div class="col-xs-4 text-right">
                <div class="btn-group">
                    <button class="btn btn-sm btn-default" title="Delete holding requests" ng-click="DeleteSelected()"><i class=" fa fa-trash"></i></button>
                    <button class="btn btn-sm btn-default btn-holding-request" name="sendHoldingRequest" ng-click="callSendHoldingRequestCardMultiSelected()"><i class="fa fa-send"></i></button>
                </div>
            </div>
        </div>
    </div>*@
</div>
<script>
    function HoldingToRequestViewModel() {
        var self = this;
        self.CourierId = 0;
        self.SendingTime = '';
        self.IsStat = false;
        self.AutoAssign = false;
    }
</script>
